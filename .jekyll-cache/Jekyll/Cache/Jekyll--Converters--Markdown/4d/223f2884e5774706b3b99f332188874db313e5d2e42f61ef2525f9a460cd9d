I"Ö|<p>Before we start‚Ä¶</p>

<blockquote>
  <p>originally this post was written on Jan 23, 2017 and available <a href="https://medium.com/@kirill.ge/sudo-save-time-e05dd04c6888">here</a></p>
</blockquote>

<p>Sooner or later every developer will have to open Safari and type <a href="">https://itunesconnect.apple.com</a> to setup application for distribution via AppStore. But exactly after you login in to iTunes, you will understand, that developer account should be setup first.</p>

<!--more-->
<blockquote>
  <p>‚ÄúTime is what we want most, but what we use worst‚Äù
 ‚Äï William Penn</p>
</blockquote>

<p>And since you start, you will see that few more additional steps should be done:</p>

<ul>
  <li>create an applicationID</li>
  <li>generate certificates (for developing and for distribution)</li>
  <li>setup application features (for example push‚Ää-‚Äänotification)</li>
  <li>generate a set of provision profiles and more</li>
</ul>

<p>And even if you complete this, you should manage all created things, share with teammate, think about security and even more. A lot of stuff, yeh, I know‚Ä¶</p>

<p>‚ÄúWait, I just want to send my app to AppStore. Why is not possible to do with one single‚Ää-‚Ääline command?¬ª.</p>

<p>Actually, it is, and it‚Äôs called‚Ää-‚Ää<code class="language-plaintext highlighter-rouge">fastlane</code>.</p>

<p>##Overview and requirements</p>

<p>¬´fastlane‚Ää-‚Ääis a tool for iOS, Mac, and Android developers to automate tedious tasks like generating screenshots, dealing with provisioning profiles, and releasing your application.¬ª‚Ää-‚Ääthis is the very first line that you will see on <a href="https://github.com/fastlane/fastlane">git page</a>, and this is 100% true.</p>

<p><code class="language-plaintext highlighter-rouge">Fastlane</code> is written in <code class="language-plaintext highlighter-rouge">Ruby</code> as a set of more or less independent modules, which have built its rich functionality set. It‚Äôs structure is easily extendable, since if you want to add some new functionality to the system, you can write simple Ruby scripts and use them within existing fastlane modules or even add new modules to fastlane.</p>

<p><code class="language-plaintext highlighter-rouge">Fastlane</code> provides a bunch of commands which help automate the deployment of apps or even perform different common task. <code class="language-plaintext highlighter-rouge">Fastlane</code> is very flexible and scalable tool.</p>

<p>Currently fastlane consists of more than 200 different modules.</p>

<p>We‚Äôll list most useful and popular below and show the basic setup for iTunesConnect delivery system using fastlane.</p>

<p>Since I‚Äôm software developer for iOS platform we will deep in process of usage fastlane mostly applicable for iOS-developers, but I‚Äôm sure that mains steps are same for all platforms that supported by this great tool.</p>

<p><code class="language-plaintext highlighter-rouge">Fastlane</code> for iOS requires following tools to be installed:</p>

<ul>
  <li>macOS X El Capitan or higher</li>
  <li>Xcode‚Ää-‚Äädeveloper‚Ää-‚Äätools for xCode 7 or later</li>
  <li>ruby/brew (optionally, recommended)</li>
  <li>textEditor¬†:)</li>
</ul>

<p>What <code class="language-plaintext highlighter-rouge">fastlane</code> can do for us? Well, the list is quite big and include a lot of things:</p>

<ul>
  <li><strong>deliver</strong>: Upload screenshots, metadata, and your app to the App Store</li>
  <li><strong>supply</strong>: Upload your Android app and its metadata to Google Play</li>
  <li><strong>snapshot</strong>: Automate taking localized screenshots of your iOS and tvOS apps on every device</li>
  <li><strong>screengrab</strong>: Automate taking localized screenshots of your Android app on every device</li>
  <li><strong>frameit</strong>: Quickly put your screenshots into the right device frames</li>
  <li><strong>pem</strong>: Automatically generate and renew your push notification profiles</li>
  <li><strong>sigh</strong>: Because you would rather spend your time building stuff than fighting provisioning</li>
  <li><strong>produce</strong>: Create new iOS apps on iTunes Connect and Dev Portal using the command line</li>
  <li><strong>cert</strong>: Automatically create and maintain iOS code signing certificates</li>
  <li><strong>spaceship</strong>: Ruby library to access the Apple Dev Center and iTunes Connect</li>
  <li><strong>pilot</strong>: The best way to manage your TestFlight testers and builds from your terminal</li>
  <li><strong>boarding</strong>: The easiest way to invite your TestFlight beta testers</li>
  <li><strong>gym</strong>: Building your iOS apps has never been easier</li>
  <li><strong>match</strong>: Easily sync your certificates and profiles across your team using Git</li>
  <li><strong>scan</strong>: The easiest way to run tests for your iOS and Mac apps</li>
</ul>

<p>In this tutorial we will look through few main features such as match, gym, testflight, sigh. This should be enough for start and setup a good delivery system that will save time for you.
So, let‚Äôs start.</p>

<h2 id="environment-setup">Environment setup</h2>

<p>To install fastlane open your terminal and do next steps:</p>
<ol>
  <li>check for latest xCode‚Ää-‚Äätools by typing code-select‚Ää-‚Ääinstall</li>
</ol>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_1.png" alt="preview_1" width="550" />
</div>

<blockquote>
  <p>Here, in my case, it‚Äôs already installed, if it‚Äôs not, you will see log with detailed process description and some pop-Up window with progress for installing xCode tools.</p>
</blockquote>

<ol>
  <li>The next step is to install fastlane itself, to do this just type sudo gem install fastlane</li>
</ol>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_2.png" alt="preview_1" width="550" />
</div>

<p>When this 2 steps are done, we can start setup fastlane for test project.</p>

<h2 id="project-setup">Project setup</h2>

<p>You might already have some project, otherwise you can create new one, single-window application. In this tutorial I‚Äôll create new one. I‚Äôll call it ¬´testFastlane¬ª</p>

<blockquote>
  <p>Tip: If you don‚Äôt have project setup in iTunesConnect, you will find ‚Äúproduce‚Äù command really useful. I won‚Äôt dive into it, but you can get <a href="https://github.com/fastlane/fastlane/tree/master/produce">more info here</a></p>
</blockquote>

<p>Navigate to root folder of your project, open terminal and switch to project dir by typing</p>

<p><code class="language-plaintext highlighter-rouge">cd &lt;path_to_root_proj_folder&gt;</code></p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_3.png" alt="preview_1" width="550" />
</div>

<p>Next, type <code class="language-plaintext highlighter-rouge">fastlane init</code>‚Ää-‚Ääthis command will create default directory with FASTFILE for you. After you will see request to enter your Apple ID, like developer@apple.com. In the next step‚Ää-‚Ää<strong>fastlane</strong> will automatically generate a fastlane configuration for you, based on the information provided.</p>

<blockquote>
  <p>Tip: It‚Äôs better to create separate Apple ID for fastlane usage and share it with your team to use with fastlane &amp; CI builds.
After creating you will be able to see new fastlane directory with all metadata fetched from iTunesConnect. In my case I don‚Äôt have much:</p>
</blockquote>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_4.png" alt="preview_1" width="250" />
</div>

<p>If you have some metadata on account, you will see something like this:</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_5.png" alt="preview_1" width="250" />
</div>

<blockquote>
  <p>Tip‚Ää-‚ÄäIt‚Äôs recommended to use Gemfile to define all dependencies for fastlane. This will allow to define fastlane version and dependencies and share them across the team with the help of ‚ÄúGemfile.lock‚Äù. The Gemfile also speed up work of fastlane.</p>
</blockquote>

<p>To prepare Gemfile you need:</p>

<ol>
  <li>Install bundler by running sudo gem install bundler</li>
  <li>Run bundler init to create Gemfile like below</li>
</ol>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_6.png" alt="preview_1" width="550" />
</div>

<p>Run <code class="language-plaintext highlighter-rouge">[sudo] bundle update</code> and add both the¬†./Gemfile and the¬†./Gemfile.lock to version control:</p>

<ul>
  <li>Every time you run fastlane, use bundle exec fastlane [lane]</li>
  <li>On your CI, add [sudo] bundle install as your first build step</li>
  <li>To update fastlane, just run [sudo] bundle update</li>
</ul>

<p>##FASTFILE config</p>

<blockquote>
  <p>Tip: FASTFILE is ruby script, evaluated by fastlane core engine when fastlane is launched, for more about ruby visit http://rubylearning.com.</p>
</blockquote>

<p><strong>FASTFILE</strong> allow you to setup build for any purpose you need. The most common‚Ää-‚Äädevelopment build, adHock build, fabric distribution build, iTunes testflight build. All these tasks and, moreover, unit testing can be done with one-line fastlane call</p>

<p>The normal distribution app process consist from few pats. The main one‚Ää-‚Ääis code signing process.</p>

<p>Sometimes it‚Äôs hard to manage all certificates (especially if you have few developer team on same account or few apps or both of it). Developer, who prepare build, should every time control all things manually, time‚Ää-‚Ääto‚Ää-‚Äätime you can forget to check something and detect this only after build prepared or even uploaded, but that‚Äôs to late, the time is gone. Fortunately, fastlane has a perfect tool for automatic code sign and certificates managing‚Ää-‚Ää<strong>fastlane match</strong>.</p>

<p>I recommend to setup this tool before we start configuring the FASTFILE.</p>

<h2 id="match-setup">Match setup</h2>

<p>At the start you should create some private repository for storing certificates and provision profiles. When you‚Äôre done, open terminal, switch to folder with cd command and run match init:</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_7.png" alt="preview_1" width="550" />
</div>

<p>You will be asked for repository url, type url link to connect match with it.</p>

<p>Next you will see success message and proposal to create appropriate certificates and provision profiles pairs on your repository.</p>

<p>If your certificates are not created yet‚Ää-‚Ääfastlane will ask about additional information to continue with your request‚Ää-‚Ääjust follow instruction in console to complete this step.</p>

<p>Let‚Äôs create pair for appstore distribution by typing fastlane match appstore. You will see something like on screenshot below:</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_8.png" alt="preview_1" width="450" />
</div>
<p><br /></p>

<p>Now, to install created certificates on any machine, just type in terminal fastlane match appstore and all certificates will be installed on the new machine (Of cause you also need to have access to repository and know pass‚Ää-‚Ääphrase for encrypted files on it to be able decrypt them).</p>

<blockquote>
  <p>Tip: If you care about security, repository with certificates and provisions is encrypted with your password, so they don‚Äôt appear explicitly available even in git. But for sure it‚Äôs worth having these certificates in private repository as well. It might cost some money with GitHub, but bitbucket allows unlimited private repositories so we‚Äôll use it in this case. For more about security check https://codesigning.guide</p>
</blockquote>

<p>To answer the question ¬´Is it secure?¬ª, just look at features that are available with <strong>fastlane match</strong>:</p>

<ul>
  <li>You have full control over the access list of your Git repo, no third party service involved</li>
  <li>Even if your certificates are leaked, they can‚Äôt be used to cause any harm without your iTunes Connect login credentials</li>
  <li>Match does not currently support In-House Enterprise profiles as they are harder to control</li>
  <li>If you use GitHub or Bitbucket we encourage enabling 2 factor authentication for all accounts that have access to the certificates repo</li>
</ul>

<p>If you go to repository source, you will see content like on screenshot below. Few separate folders with certificates and provision for each type of activity that was setup (in our case only for appStore).</p>

<blockquote>
  <p>Tip¬†: You can run similar command to add certificates for development (<strong>fastlane match development</strong>) and adhoc (<strong>fastlane match adhoc</strong>)</p>
</blockquote>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_9.png" alt="preview_1" width="550" />
</div>

<p>Now, navigate to project folder and open fastlane directory, you will be able to see MATCHFILE. The content of this file will looks like on screenshot below.</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_10.png" alt="preview_1" width="450" />
</div>
<p><br /></p>

<p>All this information required for match command, to allow properly manage certificates and provision profiles for concrete app.</p>

<h2 id="configuration">Configuration</h2>

<p>Before opening and editing FASTFILE from the directory in your project, check Appfile‚Ää-‚Ääthis file should contain appIdentifier of your app, appleID, teamID. If no, you can setup it‚Äôs manually, also if some info missing, this mean that something was wrong during setup process.
Appfile can look like on screenshot below:</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_10.png" alt="preview_1" width="450" />
</div>
<p><br /></p>

<blockquote>
  <p>Tip: Symbol <code class="language-plaintext highlighter-rouge">#</code> indicates a line for comment purpose, so it won‚Äôt be processed by fastlane, so feel free to put any additional info in file if you want
Tip: it‚Äôs recommend to use some textEditor with additional functionality instead of standard one textEdit), because sometimes textEdit can auto change some symbols and you will get unexpected results. The good alternative can be Sublime (paid) or TextWrangler (free). But it‚Äôs always up to you to choose the most suitable way.</p>
</blockquote>

<p>Ok, let‚Äôs open FASTFILE.
When you open it, you will see some sample implementation with few lanes. It‚Äôs good point to start, thus we are ready to implement our own lane, let‚Äôs remove everything from FASTFILE to start from scratch.</p>

<blockquote>
  <p>Tip: You can go to online service and create FASTFILE with friendly UI‚Ää-‚Äähttps://fabric.io/features/distribution?utm_campaign=github_readme.
For our tutorial we will create one lane for iTunes testflight distribution with notification on slack channel. Lets call this lane itunes.
To create new lane, simply type</p>
</blockquote>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">lane</span> <span class="ss">:&lt;</span><span class="nb">name</span><span class="o">&gt;</span> <span class="k">do</span>
<span class="k">end</span></code></pre></figure>

<p>In our case, this will be like:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">lane</span> <span class="ss">:itunes</span> <span class="k">do</span>
<span class="k">end</span></code></pre></figure>

<p>Now, you are able to run this lane from terminal by typing fastlane itunes, but it will do nothing. Try it.</p>

<p>To make our lane more useful, lets add command for building project‚Ää-‚Äägym.</p>

<blockquote>
  <p>Tip: To get list of all commands simply type fastlane‚Ää-‚Ääshow lists all available lanes with description or fastlane list‚Ää-‚Ääshow lists all available lanes without description</p>
</blockquote>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">lane</span> <span class="ss">:itunes</span> <span class="k">do</span>
	<span class="n">gym</span><span class="p">(</span><span class="ss">scheme: </span><span class="s2">"testFastlane"</span><span class="p">,</span>
		<span class="ss">workspace: </span><span class="s2">"testFastlane.xcworkspace"</span><span class="p">,</span>
		<span class="ss">include_bitcode: </span><span class="kp">true</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<p>Now if you run <strong>fastlane itunes</strong>, build will be created in root directory of our project.</p>

<p>Good, but not enough. Lets add possibility to auto sign our build using match, that we configure before:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">lane</span> <span class="ss">:itunes</span> <span class="k">do</span>
	<span class="n">match</span><span class="p">(</span><span class="ss">app_identifier: </span><span class="s2">"com.testFastlane.sample"</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"appstore"</span><span class="p">)</span>
	<span class="n">gym</span><span class="p">(</span><span class="ss">scheme: </span><span class="s2">"testFastlane"</span><span class="p">,</span>
		<span class="ss">workspace: </span><span class="s2">"testFastlane.xcworkspace"</span><span class="p">,</span>
		<span class="ss">include_bitcode: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">testflight</span>
<span class="k">end</span></code></pre></figure>

<p>Now, before building app, fastlane will check certificates and install latest one. We also add additional command <strong>testflight</strong>‚Ää-‚Ääthis command will upload your build to iTunes.
It‚Äôs better, but we can do even more:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">lane</span> <span class="ss">:itunes</span> <span class="k">do</span>
	<span class="n">ensure_git_status_clean</span>
	<span class="n">build_number</span> <span class="o">=</span> <span class="sb">`git rev‚Ää-‚Äälist‚Ää-‚Ää- count HEAD`</span>
	<span class="n">increment_build_number</span><span class="p">(</span><span class="ss">build_number: </span><span class="n">build_number</span><span class="p">,</span> <span class="ss">xcodeproj: </span><span class="s2">"testFastlane.xcodeproj"</span><span class="p">)</span>
	<span class="n">cocoapods</span><span class="p">(</span><span class="ss">use_bundle_exec: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">match</span><span class="p">(</span><span class="ss">app_identifier: </span><span class="s2">"com.testFastlane.sample"</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"appstore"</span><span class="p">)</span>
	<span class="n">gym</span><span class="p">(</span><span class="ss">scheme: </span><span class="s2">"testFastlane"</span><span class="p">,</span>
		<span class="ss">workspace: </span><span class="s2">"testFastlane.xcworkspace"</span><span class="p">,</span>
		<span class="ss">include_bitcode: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">testflight</span>
<span class="k">end</span></code></pre></figure>

<p>A lot of changes, what happened now? Going from top to bottom, we ask fastlane to:</p>

<ul>
  <li>make sure that there are no uncommitted changes in working copy,</li>
  <li>increment build number and make it equal to q-ty of commits in git</li>
  <li>run pod install. Version of cocoapods can be specified in Gemfile‚Ää-‚Ääno more cocoapods version unsynchronized across the team</li>
  <li>check certificates</li>
  <li>create build</li>
  <li>send it to testflight</li>
</ul>

<p>Yes, thats a lot‚Ä¶ and just 1 line of code‚Ää-‚Ääfine, but even now, we can do more!</p>

<p>Let‚Äôs add additional notification to all teammate in Slack channel, to make sure that everyone be notified about new build.</p>

<blockquote>
  <p>Tip: Incoming Web-hooks are a simple way to post messages from external sources into Slack. They make use of normal HTTP requests with a JSON payload that includes the message text and some options.</p>

  <p>You may need to create Incoming WebHook for Slack integration. To do so, visit https://api.slack.com/incoming-webhooks and follow instruction on this page</p>
</blockquote>

<p>To continue, just add one more variable to FASTFILE and call slack command like below:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ENV</span><span class="p">[</span><span class="s2">"SLACK_URL"</span><span class="p">]</span> <span class="o">||=</span> <span class="s2">"https://hooks.slack.com/services/someURL"</span>

<span class="n">lane</span> <span class="ss">:itunes</span> <span class="k">do</span>
	<span class="n">ensure_git_status_clean</span>
	<span class="n">build_number</span> <span class="o">=</span> <span class="sb">`git rev‚Ää-‚Äälist‚Ää-‚Ää- count HEAD`</span>
	<span class="n">increment_build_number</span><span class="p">(</span><span class="ss">build_number: </span><span class="n">build_number</span><span class="p">,</span> <span class="ss">xcodeproj: </span><span class="s2">"testFastlane.xcodeproj"</span><span class="p">)</span>
	<span class="n">cocoapods</span><span class="p">(</span><span class="ss">use_bundle_exec: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">match</span><span class="p">(</span><span class="ss">app_identifier: </span><span class="s2">"com.testFastlane.sample"</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"appstore"</span><span class="p">)</span>
	<span class="n">gym</span><span class="p">(</span><span class="ss">scheme: </span><span class="s2">"testFastlane"</span><span class="p">,</span>
		<span class="ss">workspace: </span><span class="s2">"testFastlane.xcworkspace"</span><span class="p">,</span>
		<span class="ss">include_bitcode: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">testflight</span>
<span class="k">end</span>

<span class="n">after_all</span> <span class="k">do</span> <span class="o">|</span><span class="n">lane</span><span class="o">|</span>
	<span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"SLACK_URL"</span><span class="p">]</span>
		<span class="n">slack</span><span class="p">(</span>
			<span class="ss">message: </span><span class="err">¬´</span><span class="no">MyAwesomeApp</span> <span class="n">is</span> <span class="n">successfully</span> <span class="n">released!</span><span class="s2">",
			success: true,
		)
	end
	
	clean_build_artifacts
end</span></code></pre></figure>

<p>Now, If you run this lane in terminal (fastlane itunes) you will got next (described by steps):</p>

<p>build increment and match step</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_12.png" alt="preview_1" width="550" />
</div>
<p><br /></p>

<p>Installing certificates and gym step:</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_13.png" alt="preview_1" width="550" />
</div>
<p><br /></p>

<p>After, compile step log and iTunes upload.</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_14.png" alt="preview_1" width="550" />
</div>
<p><br /></p>

<p>And of course notification on slack</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_15.png" alt="preview_1" width="250" />
</div>
<p><br /></p>

<p>Great, now you should feel yourself better and more powerful</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_16.png" alt="preview_1" width="250" />
</div>
<p><br /></p>

<h2 id="bonus">Bonus</h2>

<p>Oh, one more thing, almost forgot about‚Ää-‚Äälets add the most major part of lane by following next steps:</p>

<ol>
  <li>Create new file and put this code inside:</li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">ship_it</span>
	<span class="nb">rand</span> <span class="o">=</span> <span class="no">Random</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">)</span>
	<span class="k">if</span> <span class="nb">rand</span> <span class="o">==</span> <span class="mi">0</span>
		<span class="n">squirrel</span>
	<span class="k">elsif</span> <span class="nb">rand</span> <span class="o">==</span> <span class="mi">1</span>
		<span class="n">boat</span>
	<span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">squirrel</span>
	<span class="nb">puts</span> <span class="s2">"
	!!!!
	!!!!!!!!
	!!!!!!!!!!! O_O
	!!!¬†!!!!!!! /@ @</span><span class="se">\\</span><span class="s2">
	!!!!!! </span><span class="se">\\</span><span class="s2"> x /
	!!!!!!/ m¬†!m
	!!!!/ __ |
	!!!!|/ </span><span class="se">\\</span><span class="s2">__
	!!!</span><span class="se">\\</span><span class="s2">______</span><span class="se">\\</span><span class="s2">
	"</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">boat</span>
	<span class="nb">puts</span> <span class="s2">"
	. o¬†..
	o¬†. o o.o
	‚Ä¶oo
	__[]__
	__|_o_o_o</span><span class="se">\_</span><span class="s2">_
	</span><span class="se">\\\"\"\"\"\"\"\"\"\"\"</span><span class="s2">/
	</span><span class="se">\\</span><span class="s2">.¬†..¬†. /
	^^^^^^^^^^^^^^^^^^^^
	"</span>
	<span class="k">end</span></code></pre></figure>

<ol>
  <li>Save file and call it ship_sugar. Put file in fastlane directory.</li>
  <li>Open your FASTFILE and add next line in the very top:
<code class="language-plaintext highlighter-rouge">eval(File.open(File.expand_path("../ship_sugar", __FILE__)).read)</code></li>
  <li>Modify after_all section in FASTFILE:</li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">after_all</span> <span class="k">do</span> <span class="o">|</span><span class="n">lane</span><span class="o">|</span>
	<span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"SLACK_URL"</span><span class="p">]</span>
		<span class="n">slack</span><span class="p">(</span>
			<span class="ss">message: </span><span class="s2">"MyAwesomeApp is successfully released!"</span><span class="p">,</span>
			<span class="ss">success: </span><span class="kp">true</span><span class="p">,</span>
		<span class="p">)</span>
	<span class="k">end</span>
	<span class="n">ship_it</span>
<span class="k">end</span>
	<span class="n">clean_build_artifacts</span>
<span class="k">end</span></code></pre></figure>

<p>If you do everything as described above, at the end your FASTFILE should looks like next:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">eval</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s2">"../ship_sugar"</span><span class="p">,</span> <span class="kp">__FILE__</span><span class="p">)).</span><span class="nf">read</span><span class="p">)</span>
<span class="no">ENV</span><span class="p">[</span><span class="s2">"SLACK_URL"</span><span class="p">]</span> <span class="o">||=</span> <span class="s2">"https://hooks.slack.com/services/SomeURL"</span>

<span class="n">lane</span><span class="err">¬†</span><span class="ss">:itunes</span> <span class="k">do</span>
	<span class="n">ensure_git_status_clean</span>
	<span class="n">build_number</span> <span class="o">=</span> <span class="sb">`git rev‚Ää-‚Äälist‚Ää-‚Ää- count HEAD`</span>
	<span class="n">increment_build_number</span><span class="p">(</span><span class="ss">build_number: </span><span class="n">build_number</span><span class="p">,</span> <span class="ss">xcodeproj: </span><span class="s2">"testFastlane.xcodeproj"</span><span class="p">)</span>
	<span class="n">cocoapods</span><span class="p">(</span><span class="ss">use_bundle_exec: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">match</span><span class="p">(</span><span class="ss">app_identifier: </span><span class="s2">"com.testFastlane.sample"</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"appstore"</span><span class="p">)</span>
	<span class="n">gym</span><span class="p">(</span><span class="ss">scheme: </span><span class="s2">"testFastlane"</span><span class="p">,</span>
		<span class="ss">workspace: </span><span class="s2">"testFastlane.xcworkspace"</span><span class="p">,</span>
		<span class="ss">include_bitcode: </span><span class="kp">true</span><span class="p">)</span>
	<span class="n">testflight</span>
<span class="k">end</span>

<span class="n">after_all</span> <span class="k">do</span> <span class="o">|</span><span class="n">lane</span><span class="o">|</span>
	<span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"SLACK_URL"</span><span class="p">]</span>
		<span class="n">slack</span><span class="p">(</span>
			<span class="ss">message: </span><span class="err">¬´</span><span class="no">MyAwesomeApp</span> <span class="n">is</span> <span class="n">successfully</span> <span class="n">released!</span><span class="s2">",
			success: true,
		)
	end
	ship_it
end

	clean_build_artifacts
end</span></code></pre></figure>

<p>What are hell is it?</p>

<p>Be patience! Let‚Äôs run fastlane itunes, at the end, you will be able to see squirrel or ship in terminal like:</p>

<div style="text-align:center">
<img src="2017-01-23-fastlane-for-beginners/src_17.png" alt="preview_1" width="350" />
</div>
<p><br /></p>

<p>Nice, yeah?</p>

<p>Basically thats all you need to be able start working with fastlane.</p>

<blockquote>
  <p>Tip: To make the process even more descriptive you can use desc command like desc ¬´Some comment that will be visible in console¬ª</p>
</blockquote>

<h2 id="ci-integration">CI integration</h2>
<p><strong>fastlane</strong> is really powerful tool, it save for us a lot of time on project builds, but it can improve our development process even more. Since fastlane is command line one‚Ää-‚Ääliner, it can be used on CI server. Moreover, it can be applied to easily move project between different CI‚Äôs like Team-city, Jenkins etc.</p>

<blockquote>
  <p>Tip: CI¬†: Continuous Integration‚Ää-‚Ääis the practice of merging all developer working copies to a shared mainline several times a day.. To read more‚Ää-‚Ää<a href="https://en.wikipedia.org/wiki/Continuous_integration">visit</a></p>
</blockquote>

<p>In one of the next article I will cover the process of integrating fastlane with CI.</p>

<p>What to do next:
If you want to do more, try to do one of next thing:</p>
<ul>
  <li>create few more lanes for development and adhoc purposes</li>
  <li>integrate crashlytics distribution</li>
  <li>integrate auto‚Ää-‚Ääsign (produce, cert, sigh)</li>
</ul>

<p>In this tutorial we‚Äôve covered a lot of steps, but most of them should be done only once. As a result, fastlane will save your time every day.</p>

<p>As you can see, fastlane allows you to setup automated distribution process with fully controlled flow. You are also able to write your own part and integrate it with fastlane to make it more flexible and matching your needs.
To get more info I recommend to <a href="https://fastlane.tools/">visit official web site</a>.</p>
:ET