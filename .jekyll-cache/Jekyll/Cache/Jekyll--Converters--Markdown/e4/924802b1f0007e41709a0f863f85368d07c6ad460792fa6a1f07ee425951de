I"º<p>Abbreviations (in order of appearance):</p>

<ul>
  <li><strong>BLE</strong>- Bluetooth Low</li>
  <li><strong>PCB</strong> ‚Äî Printed circuit board</li>
  <li><strong>API</strong> ‚Äî Application Programming Interface</li>
</ul>

<p>Every developer who worked with iOS BLE knows that not everything is so good as it‚Äôs described in the documentation. And today, I would like to describe a few main points that can be tricky when working with BLE. I would like to provide some information for you, reader and I guess BLE-developer, to make your journey in Cocoa BLE world less painful and more productive.</p>

<p>So, the very first thing you need to know is the answer to the question ‚ÄùWhere exactly something goes wrong ‚Äî on my side or on the connected device? Does something happen when I send a command to the device?‚Äù</p>

<p>To get an answer to this question I recommend to use a few approaches:</p>

<ul>
  <li>sniffer tool</li>
  <li>3rd party apps for testing API</li>
  <li>logging</li>
  <li>firmware version of the device, with which you work without encryption or any other protection</li>
</ul>

<p>So, let‚Äôs discuss every point more details.</p>

<h2 id="sniffer-tool">Sniffer tool</h2>

<p><strong>Sniffer tool</strong> ‚Äî this a tool that allows you to intersect data packets and analyze them without a CoreBluetooth framework. It can be very helpful to distinguish different aspects of BLE communication ‚Äî requests, responses, unhandled error, unexpected messages, etc. To set up such tool, you basically need several things: special Ppcband firmware Mac. I used Wireshark and Nordic Semiconductors test board. Together they provide a powerful toolset for sniffing activities.</p>

<p>Sniffer tools can be used in two modes ‚Äî advertisement and connection.</p>

<p>Useful links are:
<a href="http://www.argenox.com/bluetooth-low-energy-ble-v4-0-development/library/ultimate-guide-to-debugging-bluetooth-smart-ble-products/">info about sniffing tools and how they work</a>
<a href="https://www.nordicsemi.com/eng/nordic/Products/nRF52-DK/nRF-Sniffer-UG-v2/65245">sniffer-tool ‚Äî nRF-Sniffer-UG</a>
<a href="https://www.wireshark.org/">Wireshark</a>
XQuartz (needed for some versions of Wireshark)</p>
:ET