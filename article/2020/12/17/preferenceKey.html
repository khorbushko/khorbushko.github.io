<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Passing data up the view tree in SwiftUI | kyryl horbushko</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Passing data up the view tree in SwiftUI" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="DataFlow with SwiftUI can be a bit tricky. Usually, we may pass data below the ViewTree, on the same level of the View and above the ViewTree. In this article, we review the possibility of transferring data up in the view tree hierarchy. This way of data management can be useful for example if u create a complex View hierarchy and some of the child items haven’t access to the parent properties and so can’t change it. An example may be NavigationBar and change its properties within any nested View or if u would like to get the exact position and size of a component from another component in the same view hierarchy and perform some action within it (alignment of view for example)." />
<meta property="og:description" content="DataFlow with SwiftUI can be a bit tricky. Usually, we may pass data below the ViewTree, on the same level of the View and above the ViewTree. In this article, we review the possibility of transferring data up in the view tree hierarchy. This way of data management can be useful for example if u create a complex View hierarchy and some of the child items haven’t access to the parent properties and so can’t change it. An example may be NavigationBar and change its properties within any nested View or if u would like to get the exact position and size of a component from another component in the same view hierarchy and perform some action within it (alignment of view for example)." />
<link rel="canonical" href="http://localhost:4000/article/2020/12/17/preferenceKey.html" />
<meta property="og:url" content="http://localhost:4000/article/2020/12/17/preferenceKey.html" />
<meta property="og:site_name" content="kyryl horbushko" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-17T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Passing data up the view tree in SwiftUI" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/article/2020/12/17/preferenceKey.html"},"@type":"BlogPosting","url":"http://localhost:4000/article/2020/12/17/preferenceKey.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/favicon.png"}},"headline":"Passing data up the view tree in SwiftUI","dateModified":"2020-12-17T00:00:00+02:00","datePublished":"2020-12-17T00:00:00+02:00","description":"DataFlow with SwiftUI can be a bit tricky. Usually, we may pass data below the ViewTree, on the same level of the View and above the ViewTree. In this article, we review the possibility of transferring data up in the view tree hierarchy. This way of data management can be useful for example if u create a complex View hierarchy and some of the child items haven’t access to the parent properties and so can’t change it. An example may be NavigationBar and change its properties within any nested View or if u would like to get the exact position and size of a component from another component in the same view hierarchy and perform some action within it (alignment of view for example).","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
  <link rel="shortcut icon" type="image/png" href="/assets/favicon.png"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="kyryl horbushko" />
<meta name='monetization' content='$ilp.uphold.com/GiEjnNF98h8k'>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">kyryl horbushko</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/bookNotes/">Books</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/blog/archives/">Archives</a><a class="page-link" href="/contact/">Contact</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Passing data up the view tree in SwiftUI</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-12-17T00:00:00+02:00" itemprop="datePublished">
        Dec 17, 2020
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">kyryl horbushko</span></span>, 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Lviv</span></span></p>

      
         
          <a class="post-tag" href="/tags/#ios">iOS</a>
         
          <a class="post-tag" href="/tags/#swiftui">SwiftUI</a>
         
          <a class="post-tag" href="/tags/#view">View</a>
         
          <a class="post-tag" href="/tags/#dataflow">dataflow</a>
         
      
         <span style="float:right;">
          <span class="ert">
    <abbr title="Estimated reading time">Estimated reading time: </abbr>
    
    
    
    

    
    
    

    
    5 minutes
</span>
         </span>
         <br>
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <br>
    <ul>
  <li><a href="#preferencekey">PreferenceKey</a></li>
  <li><a href="#custom-key">Custom key</a></li>
  <li><a href="#example">Example</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>
    <br>
    <p><code class="language-plaintext highlighter-rouge">DataFlow</code> with <code class="language-plaintext highlighter-rouge">SwiftUI</code> can be a bit tricky. Usually, we may pass data below the <code class="language-plaintext highlighter-rouge">ViewTree</code>, on the same level of the <code class="language-plaintext highlighter-rouge">View</code> and above the <code class="language-plaintext highlighter-rouge">ViewTree</code>.</p>

<p>In this article, we review the possibility of transferring data <em>up</em> in the view tree hierarchy. This way of data management can be useful for example if u create a complex View hierarchy and some of the <em>child</em> items haven’t access to the parent properties and so can’t change it. An example may be <code class="language-plaintext highlighter-rouge">NavigationBar</code> and change its properties within any nested <code class="language-plaintext highlighter-rouge">View</code> or if u would like to get the exact position and size of a component from another component in the same view hierarchy and perform some action within it (alignment of view for example).</p>

<p><!--more-->
Transferring data on the same level of view hierarchy is the simplest case - we just use variables. Transferring data down to the <code class="language-plaintext highlighter-rouge">ViewTree</code> hierarchy is possible by using <code class="language-plaintext highlighter-rouge">Environment</code> values and objects (I wrote about this <a href="/article/2020/12/15/environment-values.html">here</a>).</p>

<blockquote>
  <p>Under <code class="language-plaintext highlighter-rouge">DataFlow</code> I didn’t mean one of the type like <a href="https://en.wikipedia.org/wiki/Unidirectional_Data_Flow_(computer_science)">unidirectinal</a> or <a href="https://vaibhavgupta.me/2018/01/07/bidirectional-vs-unidirectional-data-flow-architecture/">bidirectional</a>. Instead, this name used for describing the way how we can pass data in the scope of a single <code class="language-plaintext highlighter-rouge">View</code> within it hierarchy. The idea of how it works a bit described by Apple <a href="https://developer.apple.com/documentation/swiftui/state-and-data-flow">here</a>.</p>
</blockquote>

<h2 id="preferencekey">PreferenceKey</h2>

<p>The magic of such kind of data transfer can be achieved by using a <a href="https://developer.apple.com/documentation/swiftui/preferencekey">PreferenceKey</a> - <em>“A named value produced by a view”</em>. Documentation indeed tells us not much (as usual). At least we can get information that this key is responsible for collecting and possibly combining values from its child views.</p>

<p>Think about <code class="language-plaintext highlighter-rouge">NavigationView</code> or <code class="language-plaintext highlighter-rouge">TabBar</code> or even about changing <code class="language-plaintext highlighter-rouge">colorScheme</code> for View - how we can use viewModifiers to change the values in these views even haven’t access to it?</p>

<p>We can go to the API and check what we have:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">PreferredColorSchemeKey</span> <span class="p">:</span> <span class="kt">PreferenceKey</span> <span class="p">{</span>
    <span class="c1">/// The type of value produced by this preference.</span>
    <span class="kd">public</span> <span class="kd">typealias</span> <span class="kt">Value</span> <span class="o">=</span> <span class="kt">ColorScheme</span><span class="p">?</span>

    <span class="c1">/// Combines a sequence of values by modifying the previously-accumulated</span>
    <span class="c1">/// value with the result of a closure that provides the next value.</span>
    <span class="o">...</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">reduce</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">PreferredColorSchemeKey</span><span class="o">.</span><span class="kt">Value</span><span class="p">,</span> <span class="nv">nextValue</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">PreferredColorSchemeKey</span><span class="o">.</span><span class="kt">Value</span><span class="p">)</span>
<span class="p">}</span></code></pre></figure>

<p>Here we can see, that change of <code class="language-plaintext highlighter-rouge">colorScheme</code> is done using <code class="language-plaintext highlighter-rouge">PreferenceKey</code>.</p>

<p>If we go deeper through API we also can find a function that works within this key and responds when some change occurred:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">@inlinable</span> <span class="kd">public</span> <span class="kd">func</span> <span class="n">onPreferenceChange</span><span class="o">&lt;</span><span class="kt">K</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">key</span><span class="p">:</span> <span class="kt">K</span><span class="o">.</span><span class="k">Type</span> <span class="o">=</span> <span class="kt">K</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="n">perform</span> <span class="nv">action</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">K</span><span class="o">.</span><span class="kt">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="k">where</span> <span class="kt">K</span> <span class="p">:</span> <span class="kt">PreferenceKey</span><span class="p">,</span> <span class="kt">K</span><span class="o">.</span><span class="kt">Value</span> <span class="p">:</span> <span class="kt">Equatable</span></code></pre></figure>

<p>Okay, let’s try to create our preference and play a bit within it.</p>

<h2 id="custom-key">Custom key</h2>

<p>The process of creating custom <code class="language-plaintext highlighter-rouge">PreferenceKey</code> is similar to creating <code class="language-plaintext highlighter-rouge">EnvironmentKey</code> - the protocol requires defaultValue and for implementing reduce function, thus multiply views can post the change and it’s up to u to decide how to react on these changes.</p>

<p>To experiment within this, we can create a simple view hierarchy like:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">TextView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">hideAll</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="k">let</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">String</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                <span class="n">hideAll</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
            <span class="p">},</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"Press me to </span><span class="se">\(</span><span class="n">hideAll</span> <span class="p">?</span> <span class="s">"show"</span> <span class="p">:</span> <span class="s">"hide"</span><span class="se">)</span><span class="s"> other text"</span><span class="p">)</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">SampleView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">TextView</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="s">"Hello"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"Some other text in"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Here u can see that a <code class="language-plaintext highlighter-rouge">TextView</code> should somehow hide a <code class="language-plaintext highlighter-rouge">Text</code> in the parent <code class="language-plaintext highlighter-rouge">View</code>.</p>

<blockquote>
  <p>I made the <code class="language-plaintext highlighter-rouge">@State</code> variable as <code class="language-plaintext highlighter-rouge">private</code> - just to simulate the case that we haven’t any. binding or another way to access values from parent <code class="language-plaintext highlighter-rouge">View</code>.</p>
</blockquote>

<p>Result will be like next:</p>

<div style="text-align:center">
<img src="/assets/posts/images/2020-12-17-preferenceKey/sampleView.png" alt="sampleView" width="350" />
</div>

<p>Now, we need to create a custom <code class="language-plaintext highlighter-rouge">PreferenceKey</code>. To achieve this, we need to adopt the protocol <code class="language-plaintext highlighter-rouge">PreferenceKey</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">SampleViewHideTextPreferenceKey</span><span class="p">:</span> <span class="kt">PreferenceKey</span> <span class="p">{</span>
    
    <span class="kd">static</span> <span class="k">var</span> <span class="nv">defaultValue</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    
    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">reduce</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">nextValue</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nf">nextValue</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>As was mention above, <code class="language-plaintext highlighter-rouge">defaultValue</code> - will be used if no-one use this key and <code class="language-plaintext highlighter-rouge">reduce(value:nextValue:)</code> - to combine multiply calls into a single result. As I mentioned earlier - it’s up to u to decide how to manage this data. In this case, we always just grab the latest change.</p>

<p>Usage of this preference is a simple one because we just use an existing function:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="n">preference</span><span class="o">&lt;</span><span class="kt">K</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="kt">K</span><span class="o">.</span><span class="k">Type</span> <span class="o">=</span> <span class="kt">K</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">K</span><span class="o">.</span><span class="kt">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="k">where</span> <span class="kt">K</span> <span class="p">:</span> <span class="kt">PreferenceKey</span></code></pre></figure>

<p>in our case - whenever we change this key we just call</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="nf">preference</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="kt">SampleViewHideTextPreferenceKey</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="n">newValue</span><span class="p">)</span></code></pre></figure>

<p>To make it more convinient, we can create <code class="language-plaintext highlighter-rouge">View</code> extension:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">extension</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">hideSampleViewText</span><span class="p">(</span><span class="n">_</span> <span class="nv">isHidden</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="nf">preference</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="kt">SampleViewHideTextPreferenceKey</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="n">isHidden</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="example">Example</h2>

<p>Now we can test this. To do so - add a call to the existing view to be able to respond to preference change and send change from <strong>nested</strong> child:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">TextView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">hideAll</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="k">let</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">String</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
        <span class="kt">Text</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span>
                <span class="n">hideAll</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
            <span class="p">},</span> <span class="nv">label</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"Press me to </span><span class="se">\(</span><span class="n">hideAll</span> <span class="p">?</span> <span class="s">"show"</span> <span class="p">:</span> <span class="s">"hide"</span><span class="se">)</span><span class="s"> other text"</span><span class="p">)</span>
            <span class="p">})</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">hideSampleViewText</span><span class="p">(</span><span class="n">hideAll</span><span class="p">)</span>  <span class="c1">// &lt;-- call to change</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">SampleView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">isTextHidden</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">// &lt;-- add state</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            <span class="kt">TextView</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="s">"Hello"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"Some other text in"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
                <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isTextHidden</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">// &lt;-- add actual change</span>
                <span class="o">.</span><span class="nf">animation</span><span class="p">(</span><span class="o">.</span><span class="n">easeOut</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">onPreferenceChange</span><span class="p">(</span>  <span class="c1">// &lt;-- add listener for change</span>
            <span class="kt">SampleViewHideTextPreferenceKey</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
            <span class="nv">perform</span><span class="p">:</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
                <span class="n">withAnimation</span> <span class="p">{</span>
                    <span class="n">isTextHidden</span> <span class="o">=</span> <span class="n">value</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Result:</p>

<div style="text-align:center">
<img src="/assets/posts/images/2020-12-17-preferenceKey/demo.gif" alt="demo" width="350" />
</div>

<h2 id="conclusion">Conclusion</h2>

<p>As u can see, the usage of <code class="language-plaintext highlighter-rouge">PreferenceKey</code> is easy and yet powerful. This mechanism covers the gap in data transfer up to the view tree. As for me, this option is more useful when you have a deal within complex <code class="language-plaintext highlighter-rouge">View</code> like <code class="language-plaintext highlighter-rouge">NavigationView</code> or some other composite <code class="language-plaintext highlighter-rouge">View</code> with a lot of elements and a big hierarchy. In most cases, we can go a simpler way and just use <code class="language-plaintext highlighter-rouge">Binding</code> or other similar options.</p>

<p>Be careful when u send the change - if u send it not <strong>from the child</strong> view this want work (there are a lot of questions regarding this <del>bug</del> like <a href="https://stackoverflow.com/q/58720495/2012219">this</a> ).</p>

  </div><a class="u-url" href="/article/2020/12/17/preferenceKey.html" hidden></a>
</article>

<div class="prev-next">
  
    <a class="half prev" href="/article/2020/12/16/understanding-swiftUI-View-lifecycle.html">&laquo; Understanding SwiftUI View lifecycle</a>
  
  
    <a class="half next" href="/article/2020/12/21/anchor.html">Ahoy, captain! Give me the Anchor! &raquo;</a>
  
</div>




<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span style="color: silver;">Share on: </span><div id="share-buttons">
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://localhost:4000/article/2020/12/17/preferenceKey.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://localhost:4000/article/2020/12/17/preferenceKey.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/article/2020/12/17/preferenceKey.html&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    
    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://localhost:4000/article/2020/12/17/preferenceKey.html');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://localhost:4000/article/2020/12/17/preferenceKey.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>

<script src="  https://unpkg.com/showdown/dist/showdown.min.js"></script>
<script>
const GH_API_URL = 'https://api.github.com/repos/khorbushko/khorbushko.github.io/issues/16/comments'; // ?client_id=&client_secret=

let request = new XMLHttpRequest();
request.open( 'GET', GH_API_URL, true );
request.onload = function() {
	if ( this.status >= 200 && this.status < 400 ) {
		let response = JSON.parse( this.response );

		for ( var i = 0; i < response.length; i++ ) {
			document.getElementById( 'gh-comments-list' ).appendChild( createCommentEl( response[ i ] ) );
		}

		if ( 0 === response.length ) {
			document.getElementById( 'no-comments-found' ).style.display = 'block';
		}
	} else {
		console.error( this );
	}
};

function createCommentEl( response ) {
	let user = document.createElement( 'a' );
	user.setAttribute( 'href', response.user.url.replace( 'api.github.com/users', 'github.com' ) );
	user.classList.add( 'user' );

	let userAvatar = document.createElement( 'img' );
	userAvatar.classList.add( 'avatar' );
	userAvatar.setAttribute( 'src', response.user.avatar_url );

	user.appendChild( userAvatar );

	let commentLink = document.createElement( 'a' );
	commentLink.setAttribute( 'href', response.html_url );
	commentLink.classList.add( 'comment-url' );
	commentLink.innerHTML = '#' + response.id + ' - ' + response.created_at;

	let commentContents = document.createElement( 'div' );
	commentContents.classList.add( 'comment-content' );
	commentContents.innerHTML = response.body;
	// Progressive enhancement.
	if ( window.showdown ) {
		let converter = new showdown.Converter();
		commentContents.innerHTML = converter.makeHtml( response.body );
	}

	let comment = document.createElement( 'li' );
	comment.setAttribute( 'data-created', response.created_at );
	comment.setAttribute( 'data-author-avatar', response.user.avatar_url );
	comment.setAttribute( 'data-user-url', response.user.url );

	comment.appendChild( user );
	comment.appendChild( commentContents );
	comment.appendChild( commentLink );

	return comment;
}
request.send();
</script>

<hr>

<div class="github-comments">
	<h2>Comments</h2>
	<ul id="gh-comments-list"></ul>
	<p id="leave-a-comment">Join the discussion for this article on <a href="https://github.com/khorbushko/khorbushko.github.io/issues/16">this ticket</a>. Comments appear on this page instantly.</p>
</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>RSS</span>      
          </a>
          &nbsp;&nbsp;
          <a href="https://feedrabbit.com/?url=http://khorbushko.github.io">
            <svg class="svg-icon black">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Newsletter</span>      
          </a>

        </p>
        <ul class="contact-list">
          <li class="p-name">khorbushko</li>
          <li><a class="u-email" href="mailto:kirill.ge@gmail.com">kirill.ge@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>inspired by &quot;software craftsmanship&quot;</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/khorbushko" title="khorbushko"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://stackoverflow.com/users/2012219" title="2012219"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#stackoverflow"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/kyryl-horbushko-67936bb5" title="kyryl-horbushko-67936bb5"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
