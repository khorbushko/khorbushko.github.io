<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Dynamic swift - Part 2: @dynamicMemberLookup/@dynamicCallable | kyryl horbushko</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Dynamic swift - Part 2: @dynamicMemberLookup/@dynamicCallable" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this article, I would like to explore one more dynamic feature available in the Swift language - @dynamicMemmberLookup. This new attribute introduce new behavior in Swift - something more related to scripting languages, but with swift type-safety. This attribute makes it possible to execute a subscript of an object when someone accessing properties." />
<meta property="og:description" content="In this article, I would like to explore one more dynamic feature available in the Swift language - @dynamicMemmberLookup. This new attribute introduce new behavior in Swift - something more related to scripting languages, but with swift type-safety. This attribute makes it possible to execute a subscript of an object when someone accessing properties." />
<link rel="canonical" href="http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html" />
<meta property="og:url" content="http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html" />
<meta property="og:site_name" content="kyryl horbushko" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-22T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Dynamic swift - Part 2: @dynamicMemberLookup/@dynamicCallable" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html"},"@type":"BlogPosting","url":"http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/favicon.png"}},"headline":"Dynamic swift - Part 2: @dynamicMemberLookup/@dynamicCallable","dateModified":"2021-03-22T00:00:00+02:00","datePublished":"2021-03-22T00:00:00+02:00","description":"In this article, I would like to explore one more dynamic feature available in the Swift language - @dynamicMemmberLookup. This new attribute introduce new behavior in Swift - something more related to scripting languages, but with swift type-safety. This attribute makes it possible to execute a subscript of an object when someone accessing properties.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
  <link rel="shortcut icon" type="image/png" href="/assets/favicon.png"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="kyryl horbushko" />
<meta name='monetization' content='$ilp.uphold.com/GiEjnNF98h8k'>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">kyryl horbushko</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/bookNotes/">Books</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/blog/archives/">Archives</a><a class="page-link" href="/contact/">Contact</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Dynamic swift - Part 2: @dynamicMemberLookup/@dynamicCallable</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-03-22T00:00:00+02:00" itemprop="datePublished">
        Mar 22, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">kyryl horbushko</span></span>, 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Lviv</span></span></p>

      
         
          <a class="post-tag" href="/tags/#swift">Swift</a>
         
          <a class="post-tag" href="/tags/#dynamicmemberlookup">dynamicMemberLookup</a>
         
          <a class="post-tag" href="/tags/#dynamiccallable">dynamicCallable</a>
         
      
         <span style="float:right;">
          <span class="ert">
    <abbr title="Estimated reading time">Estimated reading time: </abbr>
    
    
    
    

    
    
    

    
    5 minutes
</span>
         </span>
         <br>
      </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <br>
    <ul>
  <li><a href="#introduction">introduction</a></li>
  <li><a href="#practical-usage">practical usage</a>
    <ul>
      <li><a href="#dynamicmemberlookup">@dynamicMemberLookup</a></li>
      <li><a href="#dynamiccallable">@dynamicCallable</a></li>
    </ul>
  </li>
  <li><a href="#resources">Resources</a></li>
</ul>
    <br>
    <p>In this article, I would like to explore one more dynamic feature available in the Swift language - <code class="language-plaintext highlighter-rouge">@dynamicMemmberLookup</code>.</p>

<p>This new attribute introduce new behavior in Swift - something more related to scripting languages, but with swift type-safety. This attribute makes it possible to execute a subscript of an object when someone accessing properties.
<!--more--></p>

<p>This feature was added in Swift 4.2.</p>

<p><strong>Related articles:</strong></p>

<ul>
  <li><a href="/article/2021/03/13/dynamic-features-part-1.html">Dynamic swift - Part 1: KeyPath</a></li>
  <li>Dynamic swift - Part 2: @dynamicMemberLookup</li>
  <li><a href="/article/2021/03/25/dynamic-swift-callable.html">Dynamic swift - Part 3: Opposite to @dynamicCallable - static Callable</a></li>
  <li><a href="/article/2021/01/11/do-that-instead-of-this.html">Dynamic swift - Part 4: @dynamicReplacement</a></li>
</ul>

<h2 id="introduction">introduction</h2>

<p>According to <a href="https://docs.swift.org/swift-book/ReferenceManual/Attributes.html">Swift doc</a> - <em>“Apply this attribute to a class, structure, enumeration, or protocol to enable members to be looked up by name at runtime. The type must implement a <code class="language-plaintext highlighter-rouge">subscript(dynamicMemberLookup:)</code> subscript.”</em></p>

<p>The purpose of this attribute - is a simplification of the code by adding some syntax sugar into it. We can create a wrapper around some data. This data may be one, that can’t be checked at compile-time (so, in theory not type-safe). If we apply this to type - requested property value also will be checked at runtime, this means, that we can request property that even not exist.
Access to this data will be achieved by using <code class="language-plaintext highlighter-rouge">subscript(dynamicMemberLookup:)</code>. The parameter name must conform to <code class="language-plaintext highlighter-rouge">ExpressibleByStringLiteral</code> or <code class="language-plaintext highlighter-rouge">KeyPath</code>, and return type - any Type u like.</p>

<h2 id="practical-usage">practical usage</h2>

<h3 id="dynamicmemberlookup">@dynamicMemberLookup</h3>

<p>To use this feature u should mark u’r type with attribute @dynamicMemberLookup and declare subscript with a parameter that conforms to <code class="language-plaintext highlighter-rouge">ExpressibleByStringLiteral</code> or <code class="language-plaintext highlighter-rouge">KeyPath</code> and return any type. An external name for the parameter should be <em>dynamicMember</em>.</p>

<p>U can also have a few overloaded subscripts in type.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">@dynamicMemberLookup</span>
<span class="kd">class</span> <span class="kt">Foo</span> <span class="p">{</span>

  <span class="nf">subscript</span><span class="p">(</span><span class="n">dynamicMember</span> <span class="nv">lookUp</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="n">lookUp</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s">"a"</span><span class="o">..&lt;</span><span class="s">"d"</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">"hello"</span>
      <span class="k">default</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">" world"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="kt">Foo</span><span class="p">()</span>
<span class="c1">// generate dynamic members that does not exist</span>
<span class="nf">print</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">foo</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

<span class="c1">// Output:</span>
<span class="c1">// hello  world</span></code></pre></figure>

<p>Using <code class="language-plaintext highlighter-rouge">KeyPath</code>, thing become even better - we can access to properties of instance variables by omitting the name of the selected variable:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="kt">FooBar</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">variable1</span><span class="p">:</span> <span class="kt">String</span>
  <span class="k">var</span> <span class="nv">variable2</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

<span class="kd">@dynamicMemberLookup</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="kt">Bar</span> <span class="p">{</span>

  <span class="kd">subscript</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="n">dynamicMember</span> <span class="nv">keyPath</span><span class="p">:</span> <span class="kt">WritableKeyPath</span><span class="o">&lt;</span><span class="kt">FooBar</span><span class="p">,</span> <span class="kt">T</span><span class="o">&gt;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">T</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="n">fooBar</span><span class="p">[</span><span class="nv">keyPath</span><span class="p">:</span> <span class="n">keyPath</span><span class="p">]</span> <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="n">fooBar</span><span class="p">[</span><span class="nv">keyPath</span><span class="p">:</span> <span class="n">keyPath</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">fooBar</span><span class="p">:</span> <span class="kt">FooBar</span>

  <span class="c1">// MARK: - Lifecycle</span>

  <span class="nf">init</span><span class="p">(</span><span class="nv">fooBar</span><span class="p">:</span> <span class="kt">FooBar</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">fooBar</span> <span class="o">=</span> <span class="n">fooBar</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">var</span> <span class="nv">bar</span> <span class="o">=</span> <span class="kt">Bar</span><span class="p">(</span>
  <span class="nv">fooBar</span><span class="p">:</span> <span class="kt">FooBar</span><span class="p">(</span>
    <span class="nv">variable1</span><span class="p">:</span> <span class="s">"hello"</span><span class="p">,</span>
    <span class="nv">variable2</span><span class="p">:</span> <span class="s">" world"</span>
  <span class="p">)</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">firstVariable</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">bar</span><span class="o">.</span><span class="n">variable1</span>
<span class="k">let</span> <span class="nv">secondVariable</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">bar</span><span class="o">.</span><span class="n">variable2</span>
<span class="nf">print</span><span class="p">(</span><span class="n">firstVariable</span><span class="p">,</span> <span class="n">secondVariable</span><span class="p">)</span>

<span class="c1">// Output:</span>
<span class="c1">// hello  world</span></code></pre></figure>

<blockquote>
  <p>read more about <a href="/article/2021/03/13/dynamic-features-part-1.html">KeyPath</a></p>
</blockquote>

<p>I use this possibility not very often because as for me, it reduces understandability and readability of code - when u omit in the message chain a name of a variable that u use, u need additional time to inspect the code.</p>

<p>Also, such an approach hides from us a well-known problem with type coupling - <a href="https://refactoring.guru/smells/message-chains">Message Chains</a>.</p>

<blockquote>
  <p><em>A message chain occurs when a client requests another object, that object requests yet another one, and so on. These chains mean that the client is dependent on navigation along with the class structure. Any changes in these relationships require modifying the client.</em> <a href="https://refactoring.guru/smells/message-chains">source</a>.</p>
</blockquote>

<h3 id="dynamiccallable">@dynamicCallable</h3>

<p>This attribute, as mention in <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md">proposal</a> - natural extension to <code class="language-plaintext highlighter-rouge">@dynamicMemberLookup</code>.</p>

<p>As result, we can mark a type (a class, structure, enumeration, or protocol) as being directly callable.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">@dynamicCallable</code> is the natural extension of  <code class="language-plaintext highlighter-rouge">@dynamicMemberLookup</code> <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0195-dynamic-member-lookup.md">SE-0195</a>, and serves the same purpose: to make it easier for Swift code to work alongside dynamic languages such as Python and JavaScript <a href="https://www.hackingwithswift.com/articles/134/how-to-use-dynamiccallable-in-swift">fom Paul Hudson’s article”</a></p>
</blockquote>

<p>To make u’r type conforming to this attribute, u should declare <code class="language-plaintext highlighter-rouge">dynamicallyCall(withArguments:)</code> method or/and <code class="language-plaintext highlighter-rouge">dynamicallyCall(withKeywordArguments:)</code> method.</p>

<blockquote>
  <p>If you implement both <code class="language-plaintext highlighter-rouge">dynamicallyCall</code> methods, <code class="language-plaintext highlighter-rouge">dynamicallyCall(withKeywordArguments:)</code> is called when the method call includes keyword arguments. In all other cases, <code class="language-plaintext highlighter-rouge">dynamicallyCall(withArguments:)</code> is called.</p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">dynamicallyCall(withArguments:)</code> require a variadicparameter, that will become an array. For example: <code class="language-plaintext highlighter-rouge">1,2,3</code> will be transformed into <code class="language-plaintext highlighter-rouge">[1,2,3]</code>.</p>

<p><code class="language-plaintext highlighter-rouge">dynamicallyCall(withArguments:)</code> this method use instance of type as a function name and call it with named arguments with the specified type. For example, if we call <code class="language-plaintext highlighter-rouge">object(key: value)</code> where value is of type <code class="language-plaintext highlighter-rouge">Int</code>, inside the function we get <code class="language-plaintext highlighter-rouge">args</code> equal to <code class="language-plaintext highlighter-rouge">["key": value]</code>.</p>

<p>I prefer a simple example, that allows quickly understand how things work. So here one:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">@dynamicCallable</span>
<span class="kd">class</span> <span class="kt">FooFoo</span> <span class="p">{</span>

  <span class="kd">func</span> <span class="nf">dynamicallyCall</span><span class="p">(</span>
    <span class="n">withKeywordArguments</span> <span class="nv">args</span><span class="p">:</span> <span class="kt">KeyValuePairs</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">Int</span><span class="o">&gt;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="s">"do something with keyword args </span><span class="se">\(</span><span class="n">args</span><span class="se">)</span><span class="s">"</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">dynamicallyCall</span><span class="p">(</span>
    <span class="n">withArguments</span> <span class="nv">args</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="s">"do something with args </span><span class="se">\(</span><span class="n">args</span><span class="se">)</span><span class="s">"</span>
  <span class="p">}</span>

<span class="p">}</span>

<span class="k">let</span> <span class="nv">foofoo</span> <span class="o">=</span> <span class="kt">FooFoo</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">foofoo</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="mi">111</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">foofoo</span><span class="p">(</span><span class="mi">111</span><span class="p">))</span>

<span class="c1">// Output:</span>
<span class="c1">// do something with keyword args ["value": 111]</span>
<span class="c1">// do something with args [111]</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">@dynamicCallable</code> and <code class="language-plaintext highlighter-rouge">@dynamicMemberLookup</code> may be used on one type:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">@dynamicCallable</span>
<span class="kd">@dynamicMemberLookup</span>
<span class="kd">struct</span> <span class="kt">Foo</span> <span class="p">{</span>
	<span class="c1">// implementation</span>
<span class="p">}</span></code></pre></figure>

<p>For now, I can’t see where we can get “win” from this attribute while using just Swift, but definitely, for other developers, there is must be a big “win” here (for one who works with Python, JavaScript, Ruby, or some other domain-specific-language - definitely, thus they describe the purpose in the original proposal).</p>

<p>Again, Swift was created as a very type-safe language, but such dynamism can throw away this idea. The good point here is that all understood this, and as result, we may use <code class="language-plaintext highlighter-rouge">@dynamicMemberLookup</code> within <code class="language-plaintext highlighter-rouge">KeyPath</code>, which makes its usage a bit safer.</p>

<blockquote>
  <p>If u like an idea about using an object as a function, u may check <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0253-callable.md">Callable feature</a>, which is a “static” feature.
<br /></p>
</blockquote>

<p><a href="/assets/posts/images/2021-03-22-dynamic-swift-dynamic-member-lookup/source/play.playground.zip">download source code</a>
<br />
<br /></p>

<p><strong>Related articles:</strong></p>

<ul>
  <li><a href="/article/2021/03/13/dynamic-features-part-1.html">Dynamic swift - Part 1: KeyPath</a></li>
  <li>Dynamic swift - Part 2: @dynamicMemberLookup</li>
  <li><a href="/article/2021/03/25/dynamic-swift-callable.html">Dynamic swift - Part 3: Opposite to @dynamicCallable - static Callable</a></li>
  <li><a href="/article/2021/01/11/do-that-instead-of-this.html">Dynamic swift - Part 4: @dynamicReplacement</a></li>
</ul>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0195-dynamic-member-lookup.md">Introduce User-defined “Dynamic Member Lookup” Types</a></li>
  <li><a href="https://docs.swift.org/swift-book/ReferenceManual/Attributes.html">Swift doc</a></li>
  <li><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md">Introduce user-defined dynamically “callable” types</a></li>
  <li><a href="https://swiftrocks.com/how-dynamicmemberlookup-works-internally-in-swift">How @dynamicMemberLookup Works Internally in Swift (+ Creating Custom Swift Attributes)</a></li>
</ul>

  </div><a class="u-url" href="/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html" hidden></a>
</article>

<div class="prev-next">
  
    <a class="half prev" href="/article/2021/03/13/dynamic-features-part-1.html">&laquo; Dynamic swift - Part 1: KeyPath</a>
  
  
    <a class="half next" href="/article/2021/03/25/dynamic-swift-callable.html">Dynamic swift - Part 3: Opposite to @dynamicCallable - static Callable &raquo;</a>
  
</div>




<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span style="color: silver;">Share on: </span><div id="share-buttons">
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    
    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://localhost:4000/article/2021/03/22/dynamic-swift-dynamic-member-lookup.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>

<script src="  https://unpkg.com/showdown/dist/showdown.min.js"></script>
<script>
const GH_API_URL = 'https://api.github.com/repos/khorbushko/khorbushko.github.io/issues/34/comments'; // ?client_id=&client_secret=

let request = new XMLHttpRequest();
request.open( 'GET', GH_API_URL, true );
request.onload = function() {
	if ( this.status >= 200 && this.status < 400 ) {
		let response = JSON.parse( this.response );

		for ( var i = 0; i < response.length; i++ ) {
			document.getElementById( 'gh-comments-list' ).appendChild( createCommentEl( response[ i ] ) );
		}

		if ( 0 === response.length ) {
			document.getElementById( 'no-comments-found' ).style.display = 'block';
		}
	} else {
		console.error( this );
	}
};

function createCommentEl( response ) {
	let user = document.createElement( 'a' );
	user.setAttribute( 'href', response.user.url.replace( 'api.github.com/users', 'github.com' ) );
	user.classList.add( 'user' );

	let userAvatar = document.createElement( 'img' );
	userAvatar.classList.add( 'avatar' );
	userAvatar.setAttribute( 'src', response.user.avatar_url );

	user.appendChild( userAvatar );

	let commentLink = document.createElement( 'a' );
	commentLink.setAttribute( 'href', response.html_url );
	commentLink.classList.add( 'comment-url' );
	commentLink.innerHTML = '#' + response.id + ' - ' + response.created_at;

	let commentContents = document.createElement( 'div' );
	commentContents.classList.add( 'comment-content' );
	commentContents.innerHTML = response.body;
	// Progressive enhancement.
	if ( window.showdown ) {
		let converter = new showdown.Converter();
		commentContents.innerHTML = converter.makeHtml( response.body );
	}

	let comment = document.createElement( 'li' );
	comment.setAttribute( 'data-created', response.created_at );
	comment.setAttribute( 'data-author-avatar', response.user.avatar_url );
	comment.setAttribute( 'data-user-url', response.user.url );

	comment.appendChild( user );
	comment.appendChild( commentContents );
	comment.appendChild( commentLink );

	return comment;
}
request.send();
</script>

<hr>

<div class="github-comments">
	<h2>Comments</h2>
	<ul id="gh-comments-list"></ul>
	<p id="leave-a-comment">Join the discussion for this article on <a href="https://github.com/khorbushko/khorbushko.github.io/issues/34">this ticket</a>. Comments appear on this page instantly.</p>
</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>RSS</span>      
          </a>
          &nbsp;&nbsp;
          <a href="https://feedrabbit.com/?url=http://khorbushko.github.io">
            <svg class="svg-icon black">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Newsletter</span>      
          </a>

        </p>
        <ul class="contact-list">
          <li class="p-name">khorbushko</li>
          <li><a class="u-email" href="mailto:kirill.ge@gmail.com">kirill.ge@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>inspired by &quot;software craftsmanship&quot;</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/khorbushko" title="khorbushko"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://stackoverflow.com/users/2012219" title="2012219"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#stackoverflow"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/kyryl-horbushko-67936bb5" title="kyryl-horbushko-67936bb5"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
